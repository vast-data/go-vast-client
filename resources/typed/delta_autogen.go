// Code generated by generate-typed-resources. DO NOT EDIT.
// Template: EXTRA_METHODS_ONLY

package typed

import (
	"context"
	"net/http"

	"github.com/vast-data/go-vast-client/core"
)

// Delta provides typed access to Delta extra methods
type Delta struct {
	*core.TypedVastResource
}

// -----------------------------------------------------
// EXTRA METHODS
// -----------------------------------------------------

// DeltaConfig_GET_Model represents the response model for DeltaConfig
type DeltaConfig_GET_Model struct {
	Enabled              bool   `json:"enabled,omitempty" yaml:"enabled,omitempty" required:"true" doc:"enable/disable delta"`
	IgnoredObjectsPrefix string `json:"ignored_objects_prefix,omitempty" yaml:"ignored_objects_prefix,omitempty" required:"true" doc:"prefix to ignore objects in delta"`
}

// DeltaConfigWithContext_GET
// method: GET
// url: /delta/config/
// summary: Returns Delta Storage config.
func (r *Delta) DeltaConfigWithContext_GET(ctx context.Context) (*DeltaConfig_GET_Model, error) {
	resourcePath := "/delta/config/"

	var reqParams core.Params
	var reqBody core.Params

	record, err := core.Request[core.Record](ctx, r.Untyped.GetResourceMap()[r.GetResourceType()], http.MethodGet, resourcePath, reqParams, reqBody)
	if err != nil {
		return nil, err
	}

	var response DeltaConfig_GET_Model
	if err := record.Fill(&response); err != nil {
		return nil, err
	}
	return &response, nil

}

// DeltaConfig_GET
// method: GET
// url: /delta/config/
// summary: Returns Delta Storage config.
func (r *Delta) DeltaConfig_GET() (*DeltaConfig_GET_Model, error) {
	return r.DeltaConfigWithContext_GET(r.Untyped.GetCtx())
}

// DeltaConfig_PATCH_Model represents the response model for DeltaConfig
type DeltaConfig_PATCH_Model struct {
	Enabled              bool   `json:"enabled,omitempty" yaml:"enabled,omitempty" required:"true" doc:"enable/disable delta"`
	IgnoredObjectsPrefix string `json:"ignored_objects_prefix,omitempty" yaml:"ignored_objects_prefix,omitempty" required:"true" doc:"prefix to ignore objects in delta"`
}

// DeltaConfigWithContext_PATCH
// method: PATCH
// url: /delta/config/
// summary: Update Delta config
//
// Parameters:
//   - enabled (body): enable/disable delta
//   - ignoredObjectsPrefix (body): set prefix to ignore objects in delta
func (r *Delta) DeltaConfigWithContext_PATCH(ctx context.Context, enabled bool, ignoredObjectsPrefix bool) (*DeltaConfig_PATCH_Model, error) {
	resourcePath := "/delta/config/"

	var reqParams core.Params
	reqBody := core.Params{}
	if enabled {
		reqBody["enabled"] = enabled
	}
	if ignoredObjectsPrefix {
		reqBody["ignored_objects_prefix"] = ignoredObjectsPrefix
	}

	record, err := core.Request[core.Record](ctx, r.Untyped.GetResourceMap()[r.GetResourceType()], http.MethodPatch, resourcePath, reqParams, reqBody)
	if err != nil {
		return nil, err
	}

	var response DeltaConfig_PATCH_Model
	if err := record.Fill(&response); err != nil {
		return nil, err
	}
	return &response, nil

}

// DeltaConfig_PATCH
// method: PATCH
// url: /delta/config/
// summary: Update Delta config
//
// Parameters:
//   - enabled (body): enable/disable delta
//   - ignoredObjectsPrefix (body): set prefix to ignore objects in delta
func (r *Delta) DeltaConfig_PATCH(enabled bool, ignoredObjectsPrefix bool) (*DeltaConfig_PATCH_Model, error) {
	return r.DeltaConfigWithContext_PATCH(r.Untyped.GetCtx(), enabled, ignoredObjectsPrefix)
}
