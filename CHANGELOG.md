# Changelog

All notable changes to this project will be documented in this file.

## 0.109.0

BREAKING CHANGES:

* **EmptyRecord Removed**: The `EmptyRecord` type has been completely removed from the library. All methods that previously returned `EmptyRecord` now return `Record` instead.
 
ENHANCEMENTS:

* **Async Task Processing Utilities**: Added new helper functions in the `untyped` package for simplified async task handling
  * `MaybeWaitAsyncResult(record, rest, timeout)`: Automatically detects and waits for async tasks with a timeout
  * `MaybeWaitAsyncResultWithContext(ctx, record, rest, timeout)`: Context-aware version with timeout support

## 0.106.0

ENHANCEMENTS:

* **Iterator Support**: Added comprehensive iterator functionality for handling both paginated and non-paginated API responses
  * New `Iterator` interface with idiomatic Go methods: `Next() (RecordSet, error)`, `Previous() (RecordSet, error)`, `HasNext()`, `HasPrevious()`, `Reset() (RecordSet, error)`, `All() (RecordSet, error)`, `Count()`, `PageSize()`
  * Added `GetIterator(params, pageSize)` and `GetIteratorWithContext(ctx, params, pageSize)` methods to all resources
  * Automatic detection of paginated vs non-paginated responses
  * Support for bidirectional navigation (forward and backward)
  * Lazy loading of pages for memory efficiency
  * Comprehensive documentation and examples in `docs/iterators.md`
  * Pagination envelope unwrapping removed from interceptors - Iterator handles it directly
  * `List()` now uses `GetIterator().All()` internally - Iterator is the base abstraction
  * Global `PageSize` configuration in `VMSConfig` (default: 0 means no page_size param, let server decide)
  * Can override page size per iterator, or use 0 to omit page_size parameter

## 0.103.0

ENHANCEMENTS:

* **Monitor Resource**: Fixed query parameter encoding for `prop_list` in ad-hoc metrics queries to properly send multiple parameters instead of comma-separated values

## 0.100.0

NOTES:

* The REST client has been **split into two distinct client types** to provide flexibility for different use cases:
  * **Typed Client** (`NewTypedVMSRest`): Provides strongly-typed structs for requests and responses with compile-time type safety, IDE auto-completion, and clear API contracts. Recommended for most use cases.
  * **Untyped Client** (`NewVMSRest`): Uses flexible `map[string]any` for data handling. Useful for dynamic scenarios and prototyping.

* The client now supports **full API coverage** for VAST 5.4, with all endpoints autogenerated from the OpenAPI specification

* Resources are now organized by URL structure, with sub-resources becoming **"extra methods"** on their parent resources

BREAKING CHANGES:

* **UserKeys resource removed**: User access key (S3 keys) operations are now available as extra methods on the `Users` resource (via `/users/{id}/access_keys/` endpoints). Use `Users.UserAccessKeys_POST()` to create keys, `Users.UserAccessKeys_DELETE()` to delete keys, and `Users.UserAccessKeys_PATCH()` to enable/disable keys.

* **NonLocalUsers resource removed**: Non-local user operations are now part of the `Users` resource. Use the `Users.UserQuery_GET()` method with appropriate query parameters (via `/users/query/` endpoint).

* **NonLocalGroups resource removed**: Non-local group operations are now part of the `Groups` resource. Use the `Groups.GroupQuery_GET()` method with appropriate query parameters (via `/groups/query/` endpoint).

* **Resource structure reorganized**: All resources now follow a consistent autogenerated pattern:
  * Standard CRUD operations: `List`, `Get`, `Create`, `Update`, `Delete`
  * Sub-resource operations available as "extra methods" with descriptive names based on the endpoint path
  * Extra methods located in `resources/typed/` for typed client and `resources/untyped/` for untyped client

ENHANCEMENTS:

* **Typed Client**: Complete typed coverage for all VAST API resources with strongly-typed request/response models
* **Autogenerated Code**: All resource methods are now generated from OpenAPI specification, ensuring API consistency and reducing maintenance overhead
* **Extra Methods**: Sub-resource operations (like user keys, tenant data, queries) are now available as clearly named methods on parent resources
* **Improved API Coverage**: Full support for all VAST 5.4 API endpoints
* **Better Documentation**: All generated methods include inline documentation with endpoint paths and descriptions

## 0.54.0 and earlier

For changes prior to 0.100.0, please refer to the Git commit history.
